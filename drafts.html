drafts.html
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MORSTRIX | –ê—Ä—Ö—ñ–≤ (Pixel Art)</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #000000; /* –ß–æ—Ä–Ω–∏–π —Ñ–æ–Ω */
            --grid-color: #3a3a3a; /* –¢–µ–º–Ω–æ-–≥—Ä–∞—Ñ—ñ—Ç–æ–≤–∏–π –¥–ª—è —Å—ñ—Ç–∫–∏/—Ä–∞–º–∫–∏ */
            --text-color: #00ff00; /* –Ø—Å–∫—Ä–∞–≤–æ-–∑–µ–ª–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç—É */
            --accent-color: #ff00ff; /* –ú–∞–¥–∂–µ–Ω—Ç–∞ –¥–ª—è –∞–∫—Ü–µ–Ω—Ç—É */
            --draw-color: #ffffff; /* –ë—ñ–ª–∏–π –¥–ª—è –∫–∏—Å—Ç—ñ (–∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞) */
            --erase-color: #000000; /* –ö–æ–ª—ñ—Ä —Å—Ç–∏—Ä–∞–Ω–Ω—è */
            --cell-size: 80px;
        }

        body {
            font-family: 'Press Start 2P', monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            touch-action: pan-y;
            image-rendering: pixelated;
        }
        
        @supports not (font-family: 'Press Start 2P') {
             body {
                font-family: monospace;
            }
        }

        .header {
            text-align: center;
            padding: 10px;
            background-color: var(--grid-color);
            color: var(--draw-color); /* –ë—ñ–ª–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
            box-shadow: 0 4px 0 var(--accent-color);
            margin-bottom: 5px;
            text-shadow: 2px 2px 0 #000;
        }

        .grid-container {
            /* 4 –ö–û–õ–û–ù–ö–ò –ù–ê 7 –†–Ø–î–ö–Ü–í */
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            gap: 1px; 
            padding: 10px;
            background-color: var(--grid-color); 
        }

        .cell {
            min-height: var(--cell-size);
            background-color: var(--bg-color);
            border: 1px solid var(--grid-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.1s;
            text-align: center;
            padding: 5px;
            font-size: 10px;
        }

        .cell:hover {
            background-color: #1a1a1a;
        }

        .note-indicator {
            color: var(--draw-color); /* –ë—ñ–ª–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä */
            font-size: 14px;
            text-shadow: 1px 1px 0 #000;
            margin-top: 5px;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ (–†–µ–¥–∞–∫—Ç–æ—Ä–∞) */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98); 
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            width: 95%;
            max-width: 600px;
            height: 80vh; 
            background: var(--bg-color);
            border: 2px solid var(--grid-color); /* –†–∞–º–∫–∞ —Ç–µ–º–Ω–æ-–≥—Ä–∞—Ñ—ñ—Ç–æ–≤–∞ */
            padding: 20px;
            box-shadow: 4px 4px 0 var(--accent-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        #art-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
        }
        
        #pixel-canvas {
            border: 2px solid var(--draw-color); /* –ë—ñ–ª–∞ —Ä–∞–º–∫–∞ –Ω–∞–≤–∫–æ–ª–æ Canvas */
            box-shadow: 0 0 10px var(--accent-color);
            image-rendering: pixelated;
            touch-action: none; 
            background-color: var(--erase-color);
            width: 256px;
            height: 256px;
        }
        
        .art-controls {
            margin-top: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            width: 100%;
            max-width: 256px; /* –®–∏—Ä–∏–Ω–∞ —è–∫ —É Canvas */
            justify-content: space-between;
        }
        
        .tool-indicator {
            color: var(--draw-color);
            font-size: 12px;
            padding: 8px;
            background-color: var(--grid-color);
        }

        .art-btn {
            background-color: var(--accent-color);
            color: var(--bg-color);
            border: none;
            padding: 8px 10px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            box-shadow: 2px 2px 0 #000;
        }

        .art-btn.active {
            background-color: var(--text-color);
        }
        
        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            width: 100%;
            max-width: 256px; /* –®–∏—Ä–∏–Ω–∞ —è–∫ —É Canvas */
            margin-top: auto; 
        }

        .save-btn, .send-btn, .close-btn {
            background-color: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            box-shadow: 2px 2px 0 #000;
            flex-grow: 1; 
        }

        .send-btn {
            background-color: #ff9900;
        }
        
        .close-btn {
            background-color: var(--grid-color);
            color: var(--draw-color);
        }

    </style>
</head>
<body>

    <div class="header">
        MORSTRIX ART V3.0
    </div>

    <div id="grid-container" class="grid-container">
        </div>

    <div id="artModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">–ê–†–¢ [X, Y]</h2>
            
            <div id="art-container">
                <canvas id="pixel-canvas" width="256" height="256"></canvas>
            </div>
            
            <div class="art-controls">
                <div id="toolIndicator" class="tool-indicator">
                    –Ü–ù–°–¢–†–£–ú–ï–ù–¢: **–ö–ò–°–¢–¨**
                </div>
                <button id="clearArtBtn" class="art-btn">–û–ß–ò–°–¢–ò–¢–ò</button>
                <button id="toggleToolBtn" class="art-btn">
                    <span id="toolName">–õ–ê–°–¢–ò–ö</span>
                </button>
            </div>


            <div class="button-group">
                <button id="saveAndCloseBtn" class="save-btn">–ó–ë–ï–†–ï–ì–¢–ò & –ó–ê–ö–†–ò–¢–ò</button>
                <button id="sendArtBtn" class="send-btn">–ù–ê–î–Ü–°–õ–ê–¢–ò</button>
            </div>
        </div>
    </div>

    <script>
        const GRID_ROWS = 7;
        const GRID_COLS = 4;
        const ART_GRID_SIZE = 8; // 8x8 –ø—ñ–∫—Å–µ–ª—ñ–≤
        const CANVAS_SIZE = 256;
        const PIXEL_SIZE = CANVAS_SIZE / ART_GRID_SIZE; 
        
        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤ –∑ CSS –∑–º—ñ–Ω–Ω–∏—Ö
        const getCssVar = (name) => getComputedStyle(document.documentElement).getPropertyValue(name).trim();
        const WHITE_COLOR = getCssVar('--draw-color'); // #ffffff (–ö–∏—Å—Ç—å)
        const ERASER_COLOR = getCssVar('--erase-color'); // #000000 (–õ–∞—Å—Ç–∏–∫)
        const GRID_COLOR = getCssVar('--grid-color'); // #3a3a3a (–õ—ñ–Ω—ñ—ó)

        const gridContainer = document.getElementById('grid-container');
        const artModal = document.getElementById('artModal');
        const modalTitle = document.getElementById('modalTitle');
        const canvas = document.getElementById('pixel-canvas');
        const ctx = canvas.getContext('2d');
        const clearArtBtn = document.getElementById('clearArtBtn');
        const toggleToolBtn = document.getElementById('toggleToolBtn');
        const toolIndicator = document.getElementById('toolIndicator');
        const toolNameSpan = document.getElementById('toolName');
        const saveAndCloseBtn = document.getElementById('saveAndCloseBtn');
        const sendArtBtn = document.getElementById('sendArtBtn');
        
        let currentCellKey = null;
        let allArts = loadArts();
        let pixelGrid = []; // –ú–∞—Å–∏–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –ø—ñ–∫—Å–µ–ª—ñ–≤
        let currentTool = 'brush'; // 'brush' –∞–±–æ 'eraser'
        let isDrawing = false; // –î–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –ø—Ä–∏ –¥–æ—Ç–∏–∫—É

        // ----------------------------------------------------
        // üíæ LOCAL STORAGE –§–£–ù–ö–¶–Ü–á
        // ----------------------------------------------------

        function loadArts() {
            try {
                // –ó–º—ñ–Ω—é—î–º–æ –∫–ª—é—á, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑—ñ —Å—Ç–∞—Ä–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
                const data = localStorage.getItem('morstrix_arts_v3'); 
                return data ? JSON.parse(data) : {};
            } catch (e) {
                console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è LocalStorage:", e);
                return {};
            }
        }

        function saveArts() {
            try {
                localStorage.setItem('morstrix_arts_v3', JSON.stringify(allArts));
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                }
            } catch (e) {
                console.error("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è LocalStorage:", e);
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('error');
                }
            }
        }
        
        // ----------------------------------------------------
        // üñºÔ∏è –õ–û–ì–Ü–ö–ê –ü–Ü–ö–°–ï–õ–¨–ù–û–ì–û –ê–†–¢–£ –¢–ê –ú–ê–õ–Æ–í–ê–ù–ù–Ø
        // ----------------------------------------------------

        function initPixelGrid() {
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ø–æ—Ä–æ–∂–Ω—é —Å—ñ—Ç–∫—É –∫–æ–ª—å–æ—Ä–æ–º –ª–∞—Å—Ç–∏–∫–∞ (—á–æ—Ä–Ω–∏–π —Ñ–æ–Ω)
            pixelGrid = Array(ART_GRID_SIZE).fill(0).map(() => 
                Array(ART_GRID_SIZE).fill(ERASER_COLOR)
            );
        }

        function loadArt(cellKey) {
            initPixelGrid(); 
            const artData = allArts[cellKey]; 
            
            if (artData && artData.length === ART_GRID_SIZE && artData[0].length === ART_GRID_SIZE) {
                pixelGrid = artData;
            }
            redrawCanvas();
        }
        
        function saveArt(cellKey) {
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Å—ñ—Ç–∫–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–æ—Ä–æ–∂–Ω—è
            const isBlank = pixelGrid.flat().every(color => color === ERASER_COLOR);
            
            if (isBlank) {
                delete allArts[cellKey];
            } else {
                allArts[cellKey] = pixelGrid;
            }
            saveArts();
        }

        function redrawCanvas() {
            for (let r = 0; r < ART_GRID_SIZE; r++) {
                for (let c = 0; c < ART_GRID_SIZE; c++) {
                    // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –∫–ª—ñ—Ç–∏–Ω–∫—É –∫–æ–ª—å–æ—Ä–æ–º
                    ctx.fillStyle = pixelGrid[r][c] || ERASER_COLOR;
                    ctx.fillRect(c * PIXEL_SIZE, r * PIXEL_SIZE, PIXEL_SIZE, PIXEL_SIZE);
                    
                    // –ú–∞–ª—é—î–º–æ —Ç–µ–º–Ω–æ-–≥—Ä–∞—Ñ—ñ—Ç–æ–≤—É —Å—ñ—Ç–∫—É
                    ctx.strokeStyle = GRID_COLOR;
                    ctx.lineWidth = 1;
                    ctx.strokeRect(c * PIXEL_SIZE, r * PIXEL_SIZE, PIXEL_SIZE, PIXEL_SIZE);
                }
            }
        }
        
        function getCoords(e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;

            if (e.touches && e.touches.length > 0) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            const col = Math.floor(x / PIXEL_SIZE);
            const row = Math.floor(y / PIXEL_SIZE);
            
            return { row, col };
        }
        
        function applyTool(row, col) {
            if (row >= 0 && row < ART_GRID_SIZE && col >= 0 && col < ART_GRID_SIZE) {
                const targetColor = currentTool === 'brush' ? WHITE_COLOR : ERASER_COLOR;
                
                // –Ø–∫—â–æ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ –∫–ª—ñ—Ç–∏–Ω–∫—É –∑ –ø–æ—Ç—Ä—ñ–±–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏–º–æ (–∞–±–æ –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ)
                if (pixelGrid[row][col] === targetColor && currentTool === 'brush') {
                    // –Ø–∫—â–æ –∫–∏—Å—Ç—å, —ñ –∫–ª—ñ—Ç–∏–Ω–∫–∞ –≤–∂–µ –±—ñ–ª–∞, –ø–µ—Ä–µ–º–∏–∫–∞—î–º–æ –Ω–∞ –ª–∞—Å—Ç–∏–∫
                    pixelGrid[row][col] = ERASER_COLOR;
                } else if (pixelGrid[row][col] === targetColor && currentTool === 'eraser') {
                    // –Ø–∫—â–æ –ª–∞—Å—Ç–∏–∫, —ñ –∫–ª—ñ—Ç–∏–Ω–∫–∞ –≤–∂–µ —á–æ—Ä–Ω–∞, –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏–º–æ
                    return;
                } else {
                    pixelGrid[row][col] = targetColor;
                }
                
                redrawCanvas();
                saveArt(currentCellKey); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∞—Ä—Ç—É
                updateCellDisplay(currentCellKey);
            }
        }
        
        function handlePointerStart(e) {
            e.preventDefault();
            isDrawing = true;
            const { row, col } = getCoords(e);
            applyTool(row, col);
        }

        function handlePointerMove(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const { row, col } = getCoords(e);
            // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ setImmediate –∞–±–æ debounce –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, –∞–ª–µ –¥–ª—è 8x8 –º–æ–∂–Ω–∞ —ñ —Ç–∞–∫
            applyTool(row, col);
        }
        
        function handlePointerEnd() {
            isDrawing = false;
        }

        function toggleTool() {
            currentTool = currentTool === 'brush' ? 'eraser' : 'brush';
            const toolName = currentTool === 'brush' ? '**–ö–ò–°–¢–¨**' : '**–õ–ê–°–¢–ò–ö**';
            toolIndicator.innerHTML = `–Ü–ù–°–¢–†–£–ú–ï–ù–¢: ${toolName}`;
            toolNameSpan.textContent = currentTool === 'brush' ? '–õ–ê–°–¢–ò–ö' : '–ö–ò–°–¢–¨';
            
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
            }
        }
        
        // ----------------------------------------------------
        // üèóÔ∏è –ì–ï–ù–ï–†–ê–¶–Ü–Ø –°–Ü–¢–ö–ò –¢–ê –õ–û–ì–Ü–ö–ê
        // ----------------------------------------------------

        function generateGrid() {
            gridContainer.innerHTML = '';
            for (let row = 1; row <= GRID_ROWS; row++) {
                for (let col = 1; col <= GRID_COLS; col++) {
                    const cellKey = `cell_${row}_${col}`;
                    const cellDiv = document.createElement('div');
                    cellDiv.className = 'cell';
                    cellDiv.dataset.key = cellKey;
                    
                    cellDiv.addEventListener('click', () => openCell(cellKey, row, col));
                    gridContainer.appendChild(cellDiv);
                    updateCellDisplay(cellKey); // –û–Ω–æ–≤–ª—é—î–º–æ, —â–æ–± –ø–æ–∫–∞–∑–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π –∞—Ä—Ç
                }
            }
        }

        function openCell(cellKey, row, col) {
            currentCellKey = cellKey;
            modalTitle.textContent = `–ê–†–¢ [${row}, ${col}] (8x8)`;
            
            loadArt(cellKey); // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∞—Ä—Ç
            
            // –°–∫–∏–¥–∞—î–º–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ –∫–∏—Å—Ç—å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
            currentTool = 'brush';
            toolIndicator.innerHTML = `–Ü–ù–°–¢–†–£–ú–ï–ù–¢: **–ö–ò–°–¢–¨**`;
            toolNameSpan.textContent = '–õ–ê–°–¢–ò–ö';
            
            artModal.style.display = 'flex';
            
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.expand();
                window.Telegram.WebApp.BackButton.show();
            }
        }
        
        function updateCellDisplay(cellKey) {
            const row = cellKey.split('_')[1];
            const col = cellKey.split('_')[2];
            const currentCellDiv = document.querySelector(`.cell[data-key="${cellKey}"]`);
            if (currentCellDiv) {
                const hasArt = !!allArts[cellKey];

                let indicator = hasArt ? 'üé®' : '';
                
                currentCellDiv.innerHTML = `[${row}, ${col}] ${hasArt ? `<div class="note-indicator">‚ö°Ô∏è ${indicator}</div>` : ''}`;
            }
        }

        function saveAndClose() {
             // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∂–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—ñ –º–∞–ª—é–≤–∞–Ω–Ω—è
            currentCellKey = null;
            closeModal();
        }

        function closeModal() {
            artModal.style.display = 'none';
            currentCellKey = null;
            if (window.Telegram && window.Telegram.WebApp) {
                 window.Telegram.WebApp.BackButton.hide(); 
            }
        }

        function sendArt() {
            if (currentCellKey) {
                const artData = allArts[currentCellKey];
                
                if (!artData) {
                    alert("–£ —Ü—ñ–π –∫—ñ–º–Ω–∞—Ç—ñ –Ω–µ–º–∞—î –∞—Ä—Ç—É –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è.");
                    return;
                }
                
                // –ù–∞–¥—Å–∏–ª–∞—î–º–æ JSON-—Ä—è–¥–æ–∫ –∞—Ä—Ç—É
                const dataToSend = JSON.stringify(artData);
                const prefix = `ART_DATA|${currentCellKey}|`;
                
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.sendData(prefix + dataToSend); 
                    
                    // –ü—ñ—Å–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –≤–∏–¥–∞–ª—è—î–º–æ –∞—Ä—Ç –∑ Local Storage
                    delete allArts[currentCellKey];
                    saveArts();
                    
                    window.Telegram.WebApp.close();
                } else {
                    alert("–ü–æ–º–∏–ª–∫–∞: –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ Telegram WebApp API.");
                }
                
                updateCellDisplay(currentCellKey);
            }
        }


        // ----------------------------------------------------
        // ‚ö°Ô∏è –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø
        // ----------------------------------------------------

        document.addEventListener('DOMContentLoaded', () => {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.BackButton.hide();
            }
            generateGrid();
            initPixelGrid(); 
            redrawCanvas(); 

            // –û–±—Ä–æ–±–Ω–∏–∫–∏ –∞—Ä—Ç—É (–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —è–∫ –º–∏—à—ñ, —Ç–∞–∫ —ñ –¥–æ—Ç–∏–∫—É)
            canvas.addEventListener('mousedown', handlePointerStart);
            canvas.addEventListener('mousemove', handlePointerMove);
            document.addEventListener('mouseup', handlePointerEnd);
            
            canvas.addEventListener('touchstart', handlePointerStart);
            canvas.addEventListener('touchmove', handlePointerMove);
            document.addEventListener('touchend', handlePointerEnd);
            
            clearArtBtn.addEventListener('click', () => {
                if(confirm("–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ –≤–µ—Å—å –∞—Ä—Ç?")) {
                    initPixelGrid();
                    redrawCanvas();
                    saveArt(currentCellKey);
                    updateCellDisplay(currentCellKey);
                }
            });
            
            toggleToolBtn.addEventListener('click', toggleTool);

            // –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
            saveAndCloseBtn.addEventListener('click', saveAndClose);
            sendArtBtn.addEventListener('click', sendArt); 

            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.onEvent('backButtonClicked', saveAndClose);
            }
        });
    </script>
</body>
</html>