<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MORSTRIX | PAINT</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {--bg:#000; --border:#0f0; --text:#0f0; --accent:#008000;}
        *{margin:0;padding:0;box-sizing:border-box;}
        html, body {
            touch-action: none;
            overscroll-behavior: none;
            -webkit-user-select: none;
            user-select: none;
            background:var(--bg);
            overflow:hidden;
            font-family: system-ui, sans-serif;
        }
        #paint-canvas{
            display:block;
            width:100%;
            height:100vh;
            touch-action: none;
        }
        .toolbar{
            position:fixed;bottom:0;left:0;right:0;
            background:rgba(0,0,0,0.92);padding:8px;
            display:flex;justify-content:center;align-items:center;
            gap:10px;border-top:2px solid var(--border);
            flex-wrap: wrap;
        }
        .btn{
            width:44px;height:44px;border:2px solid var(--border);
            background:#111;color:var(--text);cursor:pointer;
            font-size:20px;display:flex;align-items:center;justify-content:center;
            border-radius:8px;
            transition: all 0.2s;
        }
        .btn:active{transform:scale(0.9);}
        .btn.active{box-shadow:0 0 12px var(--border); background:#222;}
        .btn.disabled{opacity:0.3; cursor:not-allowed;}
        
        #color-picker {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding: 0;
            background: #111;
            border: 2px solid var(--border);
            width: 44px;
            height: 44px;
            cursor: pointer;
            border-radius:8px;
        }
        #color-picker::-webkit-color-swatch-wrapper {padding:3px;}
        #color-picker::-webkit-color-swatch {border:2px solid #555;border-radius:4px;}
        #color-picker::-moz-color-swatch {border:2px solid #555;border-radius:4px;padding:3px;}

        .size-control {
            display:flex;align-items:center;gap:6px;background:#111;
            border:2px solid var(--border);border-radius:8px;padding:0 8px;
        }
        .size-btn{font-size:18px;width:32px;height:32px;}

        #size-value {
            min-width:24px;text-align:center;font-weight:bold;
            color:var(--text);font-size:14px;
        }

        /* –ü–ê–ù–ï–õ–¨ –®–ê–†–Ü–í */
        .layers-panel {
            position: fixed; top: 0; right: 0; width: 200px; height: 100vh;
            background: rgba(0,0,0,0.9); border-left: 2px solid var(--border);
            padding: 12px; overflow-y: auto; font-size: 12px;
        }
        .layers-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 8px; color: var(--text); font-weight: bold;
        }
        #add-layer {width: 32px; height: 32px; font-size: 18px;}
        .layers-list {display: flex; flex-direction: column; gap: 6px;}
        .layer-item {
            display: flex; align-items: center; gap: 6px;
            background: #111; border: 1px solid #333; border-radius: 6px;
            padding: 4px; font-size: 11px;
        }
        .layer-item.active {border-color: var(--border); background: #222;}
        .layer-btn {
            width: 24px; height: 24px; background: #222; border: none;
            color: var(--text); font-size: 14px; cursor: pointer;;
            border-radius: 4px; display: flex; align-items: center; justify-content: center;
        }
        .layer-btn:hover {background: #333;}
        .layer-controls {margin-left: auto; display: flex; gap: 2px;}
        .layer-name {flex: 1; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
    </style>
</head>
<body>

<canvas id="paint-canvas"></canvas>

<!-- –ü–ê–ù–ï–õ–¨ –®–ê–†–Ü–í -->
<div class="layers-panel">
    <div class="layers-header">
        <span>–®–ê–†–ò</span>
        <button id="add-layer" class="btn">+</button>
    </div>
    <div id="layers-list" class="layers-list"></div>
</div>

<!-- –ü–ê–ù–ï–õ–¨ –Ü–ù–°–¢–†–£–ú–ï–ù–¢–Ü–í -->
<div class="toolbar">
    <button id="tool-pen" class="btn active" title="–ü–µ–Ω–∑–µ–ª—å">‚úé</button>
    <button id="tool-eraser" class="btn" title="–°—Ç–∏—Ä–∞—á–∫–∞">‚úñ</button>
    
    <div class="size-control">
        <button id="size-minus" class="btn size-btn" title="–ú–µ–Ω—à–µ">‚àí</button>
        <span id="size-value">8</span>
        <button id="size-plus" class="btn size-btn" title="–ë—ñ–ª—å—à–µ">+</button>
    </div>

    <input type="color" id="color-picker" class="btn" value="#ffffff" title="–ö–æ–ª—ñ—Ä">

    <button id="tool-undo" class="btn" title="–°–∫–∞—Å—É–≤–∞—Ç–∏">‚Ü∫</button>
    <button id="tool-redo" class="btn" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏">‚Üª</button>
    <button id="tool-clear" class="btn" title="–û—á–∏—Å—Ç–∏—Ç–∏ —à–∞—Ä">üóë</button>
</div>

<script>
    const script = document.createElement('script');
    script.src = 'drafts.js?v=' + Date.now();
    script.defer = true;
    document.head.appendChild(script);
</script>

</body>
</html>